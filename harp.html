<head>
  <title>harp</title>
</head>

<body>
</body>

<template name="experiment">
    <header>
        <div class="bg">
            <div id="navigacija" class="jumbotron" style="font-size: 45px">
                Political Decision-Making on Mechanical Turk
            </div>
        </div>
    </header>

    <div class="jumbotron" style="padding:25px">
        {{>instructionsMain}}
        {{#if initialized}}
        {{else}}
            <p class="center"><input type="button" value="BEGIN" name="begin_experiment" id="begin_experiment" class="btn btn-default"/></p>
        {{/if}}
                {{#if initialized}}

                    <div id="exp_start" class="well">
                        {{#if waiting}}
                            <div class="center"> Loading... </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                    <span class="sr-only">Loading...</span>
                                </div>
                            </div>
                        {{else}}
                            {{#each questions}}
                                {{> question}}
                            {{/each}}
                        {{/if}}
                    </div>
                {{/if}}
    </div>
</template>

<template name="question0">
    <header>
        <div class="bg">
            <div id="navigacija" class="jumbotron" style="font-size: 45px">
                Political Decision-Making on Mechanical Turk
            </div>
        </div>
    </header>

    <div class="jumbotron" style="padding:25px">
        {{>question0text}}
                        {{#if initialized}}



                    <div id="exp_start" class="well">
                        {{#if waiting}}
                            <div class="center"> Loading... </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                    <span class="sr-only">Loading...</span>
                                </div>
                            </div>
                        {{else}}
                            {{#each questions}}
                                {{> question}}
                            {{/each}}
                        {{/if}}
                    </div>
                {{/if}}
    </div>
</template>


<template name="question">
    {{>Template.dynamic template=current_answer}}
    <p style="margin-bottom:100px;"></p>
</template>

<template name="mechanism0">
    {{> question0text}}
    <h3>
        <p class="center"> Current Power Allocation</p>
        <div>
            <div style="float:right;"><p id = "creditsleft"> Credits left: XXX </p></div>
            <div id="budgetbar" class="progress">
                <div id="slider0bar" class="progress-bar progress-bar-primary" style="width: 0%"></div>
                <div id="slider1bar" class="progress-bar progress-bar-success" style="width: 0%"></div>
                <div id="slider2bar" class="progress-bar progress-bar-warning" style="width: 0%"></div>
                <div id="slider3bar" class="progress-bar progress-bar-danger" style="width: 0%"></div>
                <div id="slider4bar" class="progress-bar progress-bar-info" style="width: 0%"></div>
            </div>
        </div>

        <div>
            {{#if show_timer}}
                {{#if waiting}}
                {{else}}
                    <p class="center"> Time remaining: {{time_remaining}} seconds</p>
                {{/if}}
            {{/if}}
        </div>

        <br>
        <p style="clear: both;float: left;"> Change from </p> <br>
        <p style="clear: both;float: left;"> 2016 estimate</p>
        <p style="float: right;">Chosen value</p>
        <hr style="clear: both">
        <p id="slider0label" class="mech0sliderlabel">National Defense</p>
        <div style="clear: both;">
            <p id="slider0comp" style="float: left; width: 7%; color: green;">+0.00%</p>
            <div id="slider0" style="height: 20px; width: 83%; float: left; background: rgb(51, 122, 183)"></div>
            <form name="slider0_text">
                <textarea id="slider0" style="height:30px;width:7%;min-width: 80px; float:right">{{slider0_value}}</textarea> <br>
            </form>
            <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="slider0min" style="display: inline; float: left;">min</p> <p id="slider0cur" style="display: inline;"> curr</p> <p id="slider0max" style="display: inline; float: right;">max</p> </div>
        </div>
        <br style="clear: both;">

        <p id="slider1label" class="mech0sliderlabel">Medicare &amp; Health</p>
        <div style="clear: both;">
            <p id="slider1comp" style="float: left; width: 7%; color: green;"></p>
            <div id="slider1" style="height: 20px; width: 83%; float: left; background: rgb(92, 184, 92);"></div>
            <form name="slider1_text">
                <textarea id="slider1" style="height:30px;width:7%;min-width: 80px; float:right">{{slider1_value}}</textarea> <br>
            </form>
            <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="slider1min" style="display: inline; float: left;">min</p> <p id="slider1cur" style="display: inline;"> curr</p> <p id="slider1max" style="display: inline;float: right;">max</p> </div>
        </div>
        <br style="clear: both;">
        <p id="slider2label" class="mech0sliderlabel">Transportation &amp; Science</p>
        <div style="clear: both">
            <p id="slider2comp" style="float: left; width: 7%; color: green;"></p>
            <div id="slider2" style="height: 20px; width: 83%; float: left; background: rgb(240, 173, 78);"></div>
            <form name="slider2_text">
                <textarea id="slider2" style="height:30px;width:7%;min-width: 80px;float:right">{{slider2_value}}</textarea> <br>
            </form>
            <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="slider2min" style="display: inline; float: left;">min</p> <p id="slider2cur" style="display: inline;"> curr</p> <p id="slider2max" style="display: inline;float: right;">max</p> </div>
        </div>
        <br style="clear: both;">
        <p id="slider3label" class="mech0sliderlabel">Individual Income Tax</p>
        <div style="clear: both">
            <p id="slider3comp" style="float: left; width: 7%; color: green;"></p>
            <div id="slider3" style="height: 20px; width: 83%; float: left; background: rgb(217, 83, 79);"></div>
            <form name="slider3_text">
                <textarea id="slider3" style="height:30px;width:7%;min-width: 80px;float:right">{{slider3_value}}</textarea> <br>
            </form>
            <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="slider3min" style="display: inline; float: left;">min</p> <p id="slider3cur" style="display: inline;"> curr</p> <p id="slider3max" style="display: inline;float: right;">max</p> </div>
        </div>
        <br style="clear: both">
        <div style="clear: both">
            <p id="mech0_deficit">Based on your choices, the deficit will be X. This is a Y percent change from 2016 estimates.</p>
        </div>
    </h3>
</template>

<template name="mechanism1">
    <h3>
        <div>
            {{#if show_timer}}
                {{#if waiting}}
                {{else}}
                    <p class="center"> Time remaining: {{time_remaining}} seconds</p>
                {{/if}}
            {{/if}}
        </div>
        <div>
            <form>
                <label style="width: 33%; clear: both; float: left;" class="well">
                    <p style="clear: both;float: left;"> Change from </p> <br>
                    <p style="clear: both;float: left;"> 2016 estimate</p>
                    <hr style="clear: both">
                    {{>slider_template_mech1 (slider_names "slider00" "blue")}}
                    {{>slider_template_mech1 (slider_names "slider10" "green")}}
                    {{>slider_template_mech1 (slider_names "slider20" "orange")}}
                    {{>slider_template_mech1 (slider_names "slider30" "red")}}
                    <br>
                    Option 1 <input type="radio" name="radio" value = "option1" />
                </label>
                <label style="width: 33%; float: left;" class="well">
                    <h4>
                        <div class="alert alert-warning alert-dismissible" role="alert" style="width: 35%;">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <div style="float: left;">Change from</div>
                            <br>
                            <div style="float: left;"> 2016 estimate</div>
                            <br>
                        </div>
                    </h4>
                    {{>slider_template_mech1 (slider_names "slider01" "blue")}}
                    {{>slider_template_mech1 (slider_names "slider11" "green")}}
                    {{>slider_template_mech1 (slider_names "slider21" "orange")}}
                    {{>slider_template_mech1 (slider_names "slider31" "red")}}
                    <br>
                    Option 2 <input type="radio" name="radio" value = "option2" />
                </label>
                <label style="width: 33%; float: left;" class="well">
                    {{>slider_template_mech1 (slider_names "slider02" "blue")}}
                    {{>slider_template_mech1 (slider_names "slider12" "green")}}
                    {{>slider_template_mech1 (slider_names "slider22" "orange")}}
                    {{>slider_template_mech1 (slider_names "slider32" "red")}}
                    <br>
                    Option 3 <input type="radio" name="radio" value = "option3" />
                </label>
            </form>
        </div>
    </h3>
</template>

<template name="slider_template_mech1">
    <p id="{{this.slider_comp}}" style="clear: both; float: left; width: 17%;"></p>
    <div id="{{this.slider_id}}" style="height: 20px; width: 82%; float: left; background: {{this.slider_color}}"></div>
    <div style="width: 82%; float: left; margin-left: 17%; clear: both;"><p id="{{this.slider_min}}" style="display: inline; float: left;">min</p> <p id="{{this.slider_cur}}" style="display: inline;"> curr</p> <p id="{{this.slider_max}}" style="display: inline;float: right;">max</p> </div>
    <div style="width: 82%; float: left; margin-left: 17%; clear: both;"><p id="{{this.slider_text}}" style="display:inline; height:30px;width:5%; min-width: 80px;"></p></div>
    <br style="clear: both;">
    <br>
</template>

<template name="mechanism2">
    {{> question2text}}
    <h3>
        <div>
            {{#if show_timer}}
                {{#if waiting}}
                {{else}}
                    <p class="center"> Time remaining: {{time_remaining}} seconds</p>
                {{/if}}
            {{/if}}
        </div>
        <br>
        <p id="slider0label" style="float:left">National Defense</p>
        <div style="clear: both;">
            <p id="slider0comp" style="float: left; width: 7%;"></p>
            <div id="slider0" style="height: 20px; width: 83%; float: left; background: rgb(51, 122, 183)"></div>
            <form name="slider0_text">
                <textarea id="slider0" style="height:30px;width:7%;min-width: 80px; float:right">{{slider0_value}}</textarea> <br>
            </form>
            <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="slider0min" style="display: inline; float: left;">min</p> <p id="slider0cur" style="display: inline;"> curr</p> <p id="slider0max" style="display: inline; float: right;">max</p> </div>
        </div>

        <br style="clear: both;">

        <p id="slider1label" style="float:left">Medicare &amp; Health</p>
        <div style="clear: both;">
            <p id="slider1comp" style="float: left; width: 7%;"></p>
            <div id="slider1" style="height: 20px; width: 83%; float: left; background: rgb(92, 184, 92);"></div>
            <form name="slider1_text">
                <textarea id="slider1" style="height:30px;width:7%;min-width: 80px; float:right">{{slider1_value}}</textarea> <br>
            </form>
            <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="slider1min" style="display: inline; float: left;">min</p> <p id="slider1cur" style="display: inline;"> curr</p> <p id="slider1max" style="display: inline;float: right;">max</p> </div>
        </div>

        <br style="clear: both;">
        <p id="slider2label" style="float:left">Transportation &amp; Science</p>
        <div style="clear: both">
            <p id="slider2comp" style="float: left; width: 7%;"></p>
            <div id="slider2" style="height: 20px; width: 83%; float: left; background: rgb(240, 173, 78);"></div>
            <form name="slider2_text">
                <textarea id="slider2" style="height:30px;width:7%;min-width: 80px;float:right">{{slider2_value}}</textarea> <br>
            </form>
            <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="slider2min" style="display: inline; float: left;">min</p> <p id="slider2cur" style="display: inline;"> curr</p> <p id="slider2max" style="display: inline;float: right;">max</p> </div>
        </div>

        <br style="clear: both;">
        <p id="slider3label" style="float:left">Individual Income Tax</p>
        <div style="clear: both">
            <p id="slider3comp" style="float: left; width: 7%;"></p>
            <div id="slider3" style="height: 20px; width: 83%; float: left; background: rgb(217, 83, 79);"></div>
            <form name="slider3_text">
                <textarea id="slider3" style="height:30px;width:7%;min-width: 80px;float:right">{{slider3_value}}</textarea> <br>
            </form>
            <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="slider3min" style="display: inline; float: left;">min</p> <p id="slider3cur" style="display: inline;"> curr</p> <p id="slider3max" style="display: inline;float: right;">max</p> </div>
        </div>
        <div style="clear: both">
            <p id="mech0_deficit">Based on your choices, the deficit will be X. This is a Y percent change from 2016 estimates.</p>
        </div>
        <br style="clear: both; margin-bottom: 150px;">

        <p align = "left"> On the following sliders, please indicate how much you care about each budget value being close to the values you proposed on the last page on a scale of 0 to 10. For example, if you care about all the items equally, then you could give a score of 10 each, whereas if you care more about X and not so much about Y, you could give a score of 10 to X and 2 to Y. </p>

        <p id="slider0label" style="float:left; clear:both">National Defense</p>
        <div id="slider0weight" style="height: 20px; width: 83%; float: left; background: rgb(51, 122, 183); clear: both; margin-left: 7%;"></div>
        <form name="slider0w_text">
            <textarea id="slider0w" style="height:30px;width:7%;min-width: 80px; float:right">{{slider0w_value}}</textarea> <br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="sliderwmin" style="display: inline; float: left;">min</p> <p id="sliderwcur" style="display: inline;"> curr</p> <p id="sliderwmax" style="display: inline;float: right;">max</p> </div>

        <p style="float:left; clear:both">Medicare &amp; Health</p>
        <div id="slider1weight" style="height: 20px; width: 83%; float: left; background: rgb(92, 184, 92); clear: both; margin-left: 7%;"></div>
        <form name="slider1w_text">
            <textarea id="slider1w" style="height:30px;width:7%;min-width: 80px; float:right">{{slider1w_value}}</textarea> <br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="sliderwmin" style="display: inline; float: left;">min</p> <p id="sliderwcur" style="display: inline;"> curr</p> <p id="sliderwmax" style="display: inline;float: right;">max</p> </div>

        <p style="float:left; clear:both">Transportation &amp; Science</p>
        <div id="slider2weight" style="height: 20px; width: 83%; float: left; background: rgb(240, 173, 78); clear: both; margin-left: 7%;"></div>
        <form name="slider2w_text">
            <textarea id="slider2w" style="height:30px;width:7%;min-width: 80px; float:right">{{slider2w_value}}</textarea> <br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="sliderwmin" style="display: inline; float: left;">min</p> <p id="sliderwcur" style="display: inline;"> curr</p> <p id="sliderwmax" style="display: inline;float: right;">max</p> </div>


        <p style="float:left; clear:both">Individual Income Tax</p>
        <div id="slider3weight" style="height: 20px; width: 83%; float: left; background: rgb(217, 83, 79); clear: both; margin-left: 7%;"></div>
        <form name="slider3w_text">
            <textarea id="slider3w" style="height:30px;width:7%;min-width: 80px; float:right">{{slider3w_value}}</textarea> <br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="sliderwmin" style="display: inline; float: left;">min</p> <p id="sliderwcur" style="display: inline;"> curr</p> <p id="sliderwmax" style="display: inline;float: right;">max</p> </div>

    </h3>
</template>

<template name="answer0">
    <div class="center">
        {{>Template.dynamic template=current_question_text}}
        <h4>
            <br>
            Please click 'NEXT' once you read these instructions.
            <br>
        </h4>
        <input type="button" value="NEXT" id="answer_submission" class="btn btn-default">
    </div>
</template>

<template name="answer1">
    <div class="center">
       {{>Template.dynamic template=current_mechanism}}
        <h4>
            <br style="clear: both;">
            Please explain your answers:
            <br>
        </h4>
        <form name="text_explanation">
            <textarea rows="8" cols="75"> </textarea> <br>
        </form>
        <input type="button" value="SUBMIT" id="answer_submission" class="btn btn-default">
    </div>
</template>

<template name="answer2">
    <div class="center">
        <h3>
            <p> How do you identify?</p>

            <form name = "political_stance_report">
                <label class="label label-primary">Very conservative&nbsp;&nbsp;<input type="radio" name="radio" value = "very conservative" /></label>
                <label class="label label-success">Somewhat conservative&nbsp;&nbsp;<input type="radio" name="radio" value = "somewhat conservative" /></label>
                <label class="label label-default">Neutral&nbsp;&nbsp;<input type="radio" name="radio" value = "neutral" /></label>
                <label class="label label-success">Somewhat liberal&nbsp;&nbsp;<input type="radio" name="radio" value = "somewhat liberal" /></label>
                <label class="label label-primary">Very liberal&nbsp;&nbsp;<input type="radio" name="radio" value = "very liberal" /></label>
                <br style="margin-bottom: 20px;">
                <br>
                <label class="label label-warning">Prefer not to answer&nbsp;&nbsp;<input type="radio" name="radio" value = "prefer not to answer" /></label>
            </form>
        </h3>
        <br>
        <input type="button" value="SUBMIT" id="answer_submission" class="btn btn-default">
    </div>
</template>

<template name="instructionsMain">

    <h4>
        <p align = "left">
            Welcome to our survey and thank you for participating. We are studying political decision making and have several questions regarding the US federal budget.
 			<br><br>
			We will ask you questions about how you would like the US federal government to allocate money across a few of its major budget items. We'll present the budget items and their values from 2016 and ask you how you would like to change that budget.
<br><br>
			## INCLUDE Agreement form for IRB ### </p>
        <p>Click 'begin' once you have read and if you agree to the above consent statement. </p>
    </h4>

</template>

<template name="question0text">
    <h4>
        <p align = "left">
			In the next page, we will ask you to indicate your preferences regarding the federal budget. We’ll show you a budget based on what other people who have answered this survey have preferred. You’ll then be allowed to modify the budget we show you to better match your preferences. We’ll also show you how much the government is budgeted to spend in 2016 for your reference.
			<br><br>
			You won’t be allowed to arbitrarily modify the budget that others have agreed upon, however. We’ll give you a fixed quota of ‘movement credits.’  To increase/decrease the budget from what others have agreed, you’ll have to spend these credits. Notably, the amount of credits you spend changing a given budget item will be proportional to the square of the change you make in that budget item. (Note that the square of a number a is a times a or a multiplied by a.)
			<br><br>
			For example, let’s say that people before you have agreed that we should decrease discretionary defense spending by 15% and increase taxes by 10%, but you would prefer that discretionary defense spending be decreased by 10% and taxes increased by only 7%. To move the defense spending to your ideal point, you would have to spend 25 credits (15% - 10% = 5%, and 5<sup>2</sup> = 25). To also move the tax spending to your ideal point, you would have to spend an additional 9 credits (10% - 7% = 3%, 3<sup>2</sup> = 9), for a total of 34 credits. 
			<br><br>
			Of course, you may not have enough credits to make all the changes you wish to make, and so you’ll have to prioritize the changes you care about the most. Furthermore, note that as a consequence of the squaring rule, it is cheaper to move two items 5% each, for example, than it is to move one item 10%.
			<br><br>
			Note several caveats: <br>
			<ol align = "left">
			  <li>Regarding the personal income tax, assume that the tax rates are scaled proportionally to increase/decrease receipts as you indicate. The tax rates would be scaled up progressively (i.e. higher incomes bear a larger tax burden than lower incomes). </li>
			  <li>The deficit term is updated automatically as you move the other sliders to indicate how the changes you propose will affect the yearly federal deficit.
			</li>
			</ol>
        </p>
    </h4>
</template>

<template name="question1text">
    <h4>
        <p align = "left">
In the next page, we will ask you to indicate your preferences regarding the federal budget. We’ll first show you the current year’s federal budget. Then, we’ll show you three potential ways we could change the budget. Please read the proposed budget changes and select the one that you like the most.
			<br><br>
			Note several caveats: <br>
			<ol align = "left">
			  <li>Regarding the personal income tax, assume that the tax rates are scaled proportionally to increase/decrease receipts as you indicate. The tax rates would be scaled up progressively (i.e. higher incomes bear a larger tax burden than lower incomes). </li>
			  <li>The deficit term is updated automatically as you move the other sliders to indicate how the changes you propose will affect the yearly federal deficit.
			</li>
			</ol>
        </p>
    </h4>
</template>

<template name="question2text">
    <h4>
        <p align = "left">
			In the next page, we will ask you to indicate your preferences regarding the federal budget. For each of the given budget items, please move the sliders to indicate your ideal value for  that budget item. 
			<br><br>
			We’ll also show you how much the government is budgeted to spend in 2016 for each budget item for your reference.
			<br><br>
			Note several caveats: <br>
			<ol align = "left">
			  <li>Regarding the personal income tax, assume that the tax rates are scaled proportionally to increase/decrease receipts as you indicate. The tax rates would be scaled up progressively (i.e. higher incomes bear a larger tax burden than lower incomes). </li>
			  <li>The deficit term is updated automatically as you move the other sliders to indicate how the changes you propose will affect the yearly federal deficit.
			</li>
			</ol>
        </p>
    </h4>
</template>