<head>
  <title>harp</title>
</head>

<body>
</body>

<template name="experiment">
    <header>
        <div class="bg">
            <div id="navigacija" class="jumbotron" style="font-size: 45px">
                Political Decision-Making on Mechanical Turk
            </div>
        </div>
    </header>

    <div class="jumbotron" style="padding:25px">
        {{>instructionsMain}}
        {{#if initialized}}
        {{else}}
            <p class="center"><input type="button" value="BEGIN" name="begin_experiment" id="begin_experiment" class="btn btn-default"/></p>
        {{/if}}
                {{#if initialized}}

                    <div id="exp_start" class="well">
                        {{#if waiting}}
                            <div class="center"> Loading... </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                    <span class="sr-only">Loading...</span>
                                </div>
                            </div>
                        {{else}}
                            {{#each questions}}
                                {{> question}}
                            {{/each}}
                        {{/if}}
                    </div>
                {{/if}}
    </div>
</template>

<template name="question0">
    <header>
        <div class="bg">
            <div id="navigacija" class="jumbotron" style="font-size: 45px">
                Political Decision-Making on Mechanical Turk
            </div>
        </div>
    </header>

    <div class="jumbotron" style="padding:25px">
        {{>question0text}}
                        {{#if initialized}}



                    <div id="exp_start" class="well">
                        {{#if waiting}}
                            <div class="center"> Loading... </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                                    <span class="sr-only">Loading...</span>
                                </div>
                            </div>
                        {{else}}
                            {{#each questions}}
                                {{> question}}
                            {{/each}}
                        {{/if}}
                    </div>
                {{/if}}
    </div>
</template>


<template name="question">
    {{>Template.dynamic template=current_answer}}
    <p style="margin-bottom:100px;"></p>
</template>

<template name="mechanism0">
    <h3>
        <p class="center"> Current Credit Allocation</p>
        <div>
            <div style="float:right;"><p id = "creditsleft">Credits left: 100</p></div>
            <div id="budgetbar" class="progress">
                <div id="slider0bar" class="progress-bar progress-bar-primary" style="width: 0%; color: rgb(245,245,245);"></div>
                <div id="slider1bar" class="progress-bar progress-bar-success" style="width: 0%; color: rgb(245,245,245);"></div>
                <div id="slider2bar" class="progress-bar progress-bar-warning" style="width: 0%; color: rgb(245,245,245);"></div>
                <div id="slider3bar" class="progress-bar progress-bar-danger" style="width: 0%; color: rgb(245,245,245);"></div>
            </div>
        </div>

        <div>
            {{#if show_timer}}
                {{#if waiting}}
                {{else}}
                    <p class="center"> Time remaining: {{time_remaining}} seconds</p>
                {{/if}}
            {{/if}}
        </div>

        <br>
        <p style="clear: both;float: left;"> Change from </p> <br>
        <p style="clear: both;float: left;"> 2016 estimate</p>
        <p style="float: right;">Chosen value</p>
        <hr style="clear: both">
        {{> mech0_slider (mech2_slider_names "slider0" "National Defense" "blue")}}
        {{> mech0_slider (mech2_slider_names "slider1" "Medicare & Health" "green")}}
        {{> mech0_slider (mech2_slider_names "slider2" "Transportation & Science" "orange")}}
        {{> mech0_slider (mech2_slider_names "slider3" "Individual Income Tax" "red")}}
        <br style="clear: both">
        {{> deficit_template (deficit_names)}}
    </h3>
</template>

<template name="mechanism1">

        <div>
            {{#if show_timer}}
                {{#if waiting}}
                {{else}}
                    <p class="center"> Time remaining: {{time_remaining}} seconds</p>
                {{/if}}
            {{/if}}
        </div>
        <div style="height:700px; width: 1200px; margin: auto">
            <form name="option" style="height:100%;">
                <label style="width: 33%; height:100%; clear: both; float: left;" class="well">
                    {{> slider_head_mech1}}
                    {{>slider_template_mech1 (slider_names "slider00" "blue" "National Defense")}}
                    {{>slider_template_mech1 (slider_names "slider10" "green" "Medicare & Health")}}
                    {{>slider_template_mech1 (slider_names "slider20" "orange" "Science & Transportation")}}
                    {{>slider_template_mech1 (slider_names "slider30" "red" "Individual Income Tax")}}
                    <h3>
                        {{> deficit_template (deficit_names "0")}}
                        <br>
                        Option 1
                    </h3>
                    <input type="radio" name="radio" value = "0" />
                </label>
                <label style="width: 33%; height:100%; float: left;" class="well">
                    {{> slider_head_mech1}}
                    {{>slider_template_mech1 (slider_names "slider01" "blue" "National Defense")}}
                    {{>slider_template_mech1 (slider_names "slider11" "green" "Medicare & Health")}}
                    {{>slider_template_mech1 (slider_names "slider21" "orange" "Science & Transportation")}}
                    {{>slider_template_mech1 (slider_names "slider31" "red" "Individual Income Tax")}}
                    <h3>
                        {{> deficit_template (deficit_names "1")}}
                        <br>
                        Option 2
                    </h3>
                    <input type="radio" name="radio" value = "1" />
                </label>
                <label style="width: 33%; height:100%; float: left;" class="well">
                    {{> slider_head_mech1}}
                    {{>slider_template_mech1 (slider_names "slider02" "blue" "National Defense")}}
                    {{>slider_template_mech1 (slider_names "slider12" "green" "Medicare & Health")}}
                    {{>slider_template_mech1 (slider_names "slider22" "orange" "Science & Transportation")}}
                    {{>slider_template_mech1 (slider_names "slider32" "red" "Individual Income Tax")}}
                    <h3>
                        {{> deficit_template (deficit_names "2")}}
                        <br>
                        Option 3
                    </h3>
                    <input type="radio" name="radio" value = "2" />
                </label>
            </form>
        </div>

</template>

<template name="deficit_template">
    <div style="clear: both">
        <span>The</span> <span id="{{this.deficit_text}}">deficit</span><span> will be </span>
        <span id="{{this.deficit_value}}" >X</span><span>. This is a </span><span id="{{this.deficit_percentage}}">Y</span><span> from 2016 estimates.</span>
    </div>
</template>

<template name="slider_head_mech1">
    <h4 style="clear: both;float: left;"> Change from </h4> <br>
    <h4 style="clear: both;float: left;"> 2016 estimate</h4>
    <hr style="clear: both">
</template>

<template name="slider_template_mech1">
    <p style="clear: both; float:left; margin-left: 80px;">{{this.slider_title}}</p>
    <div style="clear: both;">
        <p id="{{this.slider_comp}}" style="clear: both; float: left; width: 80px;"></p>
        <div class="progress" style="width: 270px; float: left; margin-left: 5px;">
            <div id="{{this.slider_id}}" class="progress-bar" role="progressbar" style="width: 60%; background: {{this.slider_color}};">
            </div>
        </div>
    </div>
</template>

<template name="mech2_slider">
    <p id="{{this.label}}" style="float:left; margin-left: 7%;">{{this.title}}</p>
    <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="top" title="{{this.tooltip}}" aria-hidden="true" style="float:left; margin-left: 10px;"></span>
    <div style="clear: both;">
        <p id="{{this.comp}}" style="float: left; width: 7%;"></p>
        <div id="{{this.name}}" style="height: 20px; width: 83%; float: left; background: {{this.color}}"></div>
        <form name="{{this.text}}">
            $<textarea id="{{this.name}}" style="height:30px;width:7%;min-width: 80px">{{this.value}}</textarea>B<br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="{{this.min}}" style="display: inline; float: left;">min</p> <p id="{{this.cur}}" style="display: inline; margin-left: 17%; float:left"> curr</p> <p id="{{this.max}}" style="display: inline; float: right;">max</p> </div>
    </div>
    <br style="clear: both;">
</template>

<template name="mech0_slider">
     <p id="{{this.label}}" style="float:left; margin-left: 7%;">{{this.title}}</p>
    <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="top" title="{{this.tooltip}}" aria-hidden="true" style="float:left; margin-left: 10px;"></span>
    <div style="clear: both;">
        <p id="{{this.comp}}" style="float: left; width: 7%;"></p>
        <div id="{{this.name}}" style="height: 20px; width: 83%; float: left; background: {{this.color}}"></div>
        <form name="{{this.name}}">
            $<textarea id="{{this.name}}" style="height:30px;width:7%;min-width: 80px">{{this.value}}</textarea>B<br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="{{this.min}}" style="display: inline; float: left;">min</p> <p id="{{this.cur}}" style="display: inline;"> curr</p> <p id="{{this.max}}" style="display: inline; float: right;">max</p> </div>
    </div>
    <br style="clear: both;">
</template>

<template name="mechanism2">
    <h3>
        <div>
            {{#if show_timer}}
                {{#if waiting}}
                {{else}}
                    <p class="center"> Time remaining: {{time_remaining}} seconds</p>
                {{/if}}
            {{/if}}
        </div>
        <br>
        {{> mech2_slider (mech2_slider_names "slider0" "National Defense" "blue")}}
        {{> mech2_slider (mech2_slider_names "slider1" "Medicare & Health" "green")}}
        {{> mech2_slider (mech2_slider_names "slider2" "Transportation & Science" "orange")}}
        {{> mech2_slider (mech2_slider_names "slider3" "Individual Income Tax" "red")}}

        {{> deficit_template (deficit_names)}}
        <br style="clear: both; margin-bottom: 150px;">

        <p align = "left"> On the following sliders, please indicate how much you care about each budget value being close to the values you proposed on the last page on a scale of 0 to 10. For example, if you care about all the items equally, then you could give a score of 10 each, whereas if you care more about X and not so much about Y, you could give a score of 10 to X and 2 to Y. </p>

        <p id="slider0label" style="float:left; clear:both">National Defense</p>
        <div id="slider0weight" style="height: 20px; width: 83%; float: left; background: rgb(51, 122, 183); clear: both; margin-left: 7%;"></div>
        <form name="slider0w_text">
            <textarea id="slider0w" style="height:30px;width:7%;min-width: 80px; float:right">{{slider0w_value}}</textarea> <br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="sliderwmin" style="display: inline; float: left;">min</p> <p id="sliderwcur" style="display: inline;"> curr</p> <p id="sliderwmax" style="display: inline;float: right;">max</p> </div>

        <p style="float:left; clear:both">Medicare &amp; Health</p>
        <div id="slider1weight" style="height: 20px; width: 83%; float: left; background: rgb(92, 184, 92); clear: both; margin-left: 7%;"></div>
        <form name="slider1w_text">
            <textarea id="slider1w" style="height:30px;width:7%;min-width: 80px; float:right">{{slider1w_value}}</textarea> <br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="sliderwmin" style="display: inline; float: left;">min</p> <p id="sliderwcur" style="display: inline;"> curr</p> <p id="sliderwmax" style="display: inline;float: right;">max</p> </div>

        <p style="float:left; clear:both">Transportation &amp; Science</p>
        <div id="slider2weight" style="height: 20px; width: 83%; float: left; background: rgb(240, 173, 78); clear: both; margin-left: 7%;"></div>
        <form name="slider2w_text">
            <textarea id="slider2w" style="height:30px;width:7%;min-width: 80px; float:right">{{slider2w_value}}</textarea> <br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="sliderwmin" style="display: inline; float: left;">min</p> <p id="sliderwcur" style="display: inline;"> curr</p> <p id="sliderwmax" style="display: inline;float: right;">max</p> </div>


        <p style="float:left; clear:both">Individual Income Tax</p>
        <div id="slider3weight" style="height: 20px; width: 83%; float: left; background: rgb(217, 83, 79); clear: both; margin-left: 7%;"></div>
        <form name="slider3w_text">
            <textarea id="slider3w" style="height:30px;width:7%;min-width: 80px; float:right">{{slider3w_value}}</textarea> <br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="sliderwmin" style="display: inline; float: left;">min</p> <p id="sliderwcur" style="display: inline;"> curr</p> <p id="sliderwmax" style="display: inline;float: right;">max</p> </div>

    </h3>
</template>

<template name="answer0">
    <div class="center">
        {{>Template.dynamic template=current_question_text}}
        <h4>
            <br>
            Please click 'NEXT' once you read these instructions.
            <br>
        </h4>
        <input type="button" value="NEXT" id="answer_submission" class="btn btn-default">
    </div>
</template>

<template name="answer1">
    <div class="center">
        {{>Template.dynamic template=current_question_text}}
        {{>Template.dynamic template=current_mechanism}}
        <h4>
            <br style="clear: both;">
            Please explain your answers:
            <br>
        </h4>
        <form name="text_explanation">
            <textarea rows="8" cols="75"> </textarea> <br>
        </form>
        <input type="button" value="SUBMIT" id="answer_submission" class="btn btn-default">
    </div>
</template>

<template name="answer2">
    <div class="center">
        <h3>
            <p> How do you identify?</p>

            <form name = "political_stance_report">
                <label class="label label-primary">Very conservative&nbsp;&nbsp;<input type="radio" name="radio" value = "very conservative" /></label>
                <label class="label label-success">Somewhat conservative&nbsp;&nbsp;<input type="radio" name="radio" value = "somewhat conservative" /></label>
                <label class="label label-default">Neutral&nbsp;&nbsp;<input type="radio" name="radio" value = "neutral" /></label>
                <label class="label label-success">Somewhat liberal&nbsp;&nbsp;<input type="radio" name="radio" value = "somewhat liberal" /></label>
                <label class="label label-primary">Very liberal&nbsp;&nbsp;<input type="radio" name="radio" value = "very liberal" /></label>
                <br style="margin-bottom: 20px;">
                <br>
                <label class="label label-warning">Prefer not to answer&nbsp;&nbsp;<input type="radio" name="radio" value = "prefer not to answer" /></label>
            </form>
        </h3>
        <br>
        <input type="button" value="SUBMIT" id="answer_submission" class="btn btn-default">
    </div>
</template>

<template name="instructionsMain">

    <h4>
        <p align = "left">
            Welcome to our survey and thank you for participating. We are studying political decision making and have several questions regarding the US federal budget.
 			<br><br>
			We will ask you questions about how you would like the US federal government to allocate money across a few of its major budget items. We'll present the budget items and their values from 2016 and ask you how you would like to change that budget.
<br><br>
			## INCLUDE Agreement form for IRB ### </p>
        <p>Click 'begin' once you have read and if you agree to the above consent statement. </p>
    </h4>

</template>

<template name="question0text">
    <h4>
        <p align = "left">
			In the next page, indicate your preferences regarding the federal budget. You'll see a budget based on what other people who have answered this survey have preferred. You’ll be allowed to modify the budget we show you to better match your preferences. We’ll also show you how much the government is budgeted to spend in 2016 for your reference.
			<br><br>
			You won’t be allowed to arbitrarily modify the budget that others have agreed upon, however. We’ll give you a fixed quota of ‘movement credits.’  To increase/decrease the budget from what others have agreed, you’ll have to spend these credits. Notably, the amount of credits you spend changing a given budget item will be proportional to the square of the change you make in that budget item. (Note that the square of the number <b>a</b> is <b>a</b> times <b>a</b> or <b>a</b> multiplied by <b>a</b>.)
			<br><br>
			For example, let’s say that people before you have agreed that we should decrease defense spending by 15B and increase taxes by 10B, but you would prefer that defense spending be decreased by 10B and taxes increased by only 7B. To move the defense spending to your ideal point, you would have to spend 25 credits (15B - 10B = 5B, and 5<sup>2</sup> = 25). To also move the tax spending to your ideal point, you would have to spend an additional 9 credits (10B - 7B = 3B, 3<sup>2</sup> = 9), for a total of 34 credits. 
			<br><br>
			Of course, you may not have enough credits to make all the changes you wish to make, and so you’ll have to prioritize the changes you care about the most. Furthermore, note that as a consequence of the squaring rule, it is cheaper to move two items 5B each, for example, than it is to move one item 10B.
	        </p>
    </h4>
</template>

<template name="question1text">
    <h4>
        <p align = "left">
In the next page, indicate your preferences regarding the federal budget. You'll see three proposed federal budgets along with information on how they relate to the estimated 2016 federal budget. Select the budget you like the most.
        </p>
    </h4>
</template>

<template name="question2text">
    <h4>
        <p align = "left">
			In the next page, indicate your preferences regarding the federal budget. For each of the given budget items, please move the sliders to indicate your ideal value for  that budget item. 
        </p>
    </h4>
</template>