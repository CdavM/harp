<head>
    <title>harp</title>
</head>

<body>
</body>

<template name="experiment">
    <header>
        <div class="bg">
            <div id="navigacija" class="jumbotron" style="font-size: 45px">
                Political Decision-Making on Mechanical Turk
            </div>
        </div>
    </header>

    <div class="jumbotron" style="padding:25px">
        {{>instructionsMain}}
        {{#if initialized}}
        {{else}}
            <p class="center"><input type="button" value="BEGIN" name="begin_experiment" id="begin_experiment" class="btn btn-default"/></p>
        {{/if}}
        {{#if initialized}}

            <div id="exp_start" class="well">
                {{#if waiting}}
                    <div class="center"> Loading... </div>
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                {{else}}
                    {{#each questions}}
                        {{> question}}
                    {{/each}}
                {{/if}}
            </div>
        {{/if}}
    </div>
</template>

<template name="question0">
    <header>
        <div class="bg">
            <div id="navigacija" class="jumbotron" style="font-size: 45px">
                Political Decision-Making on Mechanical Turk
            </div>
        </div>
    </header>

    <div class="jumbotron" style="padding:25px">
        {{>question0text}}
        {{#if initialized}}



            <div id="exp_start" class="well">
                {{#if waiting}}
                    <div class="center"> Loading... </div>
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                {{else}}
                    {{#each questions}}
                        {{> question}}
                    {{/each}}
                {{/if}}
            </div>
        {{/if}}
    </div>
</template>


<template name="question">
    {{>Template.dynamic template=current_answer}}
    <p style="margin-bottom:100px;"></p>
</template>

<template name="mechanism0">
    <h3>
        <p class="center">Current Credit Allocation</p>
        <div>
            <div style="float:right;"><p id = "creditsleft">Credits left: 100</p></div>
            <div id="budgetbar" class="progress">
                <div id="slider0bar" class="progress-bar progress-bar-primary" style="width: 0%; color: rgb(245,245,245);"></div>
                <div id="slider1bar" class="progress-bar progress-bar-success" style="width: 0%; color: rgb(245,245,245);"></div>
                <div id="slider2bar" class="progress-bar progress-bar-warning" style="width: 0%; color: rgb(245,245,245);"></div>
                <div id="slider3bar" class="progress-bar progress-bar-danger" style="width: 0%; color: rgb(245,245,245);"></div>
            </div>
        </div>

        <div>
            {{#if show_timer}}
                {{#if waiting}}
                {{else}}
                    <p class="center"> Time remaining: {{time_remaining}} seconds</p>
                {{/if}}
            {{/if}}
        </div>

        <br>
        <p style="clear: both;float: left;"> Change from </p> <br>
        <p style="clear: both;float: left;"> 2016 estimate</p>
        <p style="float: right;">Chosen value</p>
        <hr style="clear: both">
        {{> mech0_slider (slider_names "slider0" "blue" "National Defense")}}
        {{> mech0_slider (slider_names "slider1" "green" "Medicare & Health")}}
        {{> mech0_slider (slider_names "slider2" "orange" "Transportation & Science")}}
        {{> mech0_slider (slider_names "slider3" "red" "Individual Income Tax")}}
        <br style="clear: both">
        {{> deficit_template (deficit_names)}}
    </h3>
</template>
<template name="mechanism3">
    <h3>
        <p class="center">Current Credit Allocation</p>
        <div>
            <div style="float:right;"><p id = "creditsleft">Credits left: 100</p></div>
            <div id="budgetbar" class="progress">
                <div id="slider0bar" class="progress-bar progress-bar-primary" style="width: 0%; color: rgb(245,245,245);"></div>
                <div id="slider1bar" class="progress-bar progress-bar-success" style="width: 0%; color: rgb(245,245,245);"></div>
                <div id="slider2bar" class="progress-bar progress-bar-warning" style="width: 0%; color: rgb(245,245,245);"></div>
                <div id="slider3bar" class="progress-bar progress-bar-danger" style="width: 0%; color: rgb(245,245,245);"></div>
            </div>
        </div>

        <div>
            {{#if show_timer}}
                {{#if waiting}}
                {{else}}
                    <p class="center"> Time remaining: {{time_remaining}} seconds</p>
                {{/if}}
            {{/if}}
        </div>

        <br>
        <p style="clear: both;float: left;"> Change from </p> <br>
        <p style="clear: both;float: left;"> 2016 estimate</p>
        <p style="float: right;">Chosen value</p>
        <hr style="clear: both">
        {{> mech0_slider (slider_names "slider0" "blue" "National Defense")}}
        {{> mech0_slider (slider_names "slider1" "green" "Medicare & Health")}}
        {{> mech0_slider (slider_names "slider2" "orange" "Transportation & Science")}}
        {{> mech0_slider (slider_names "slider3" "red" "Individual Income Tax")}}
        <br style="clear: both">
        {{> deficit_template (deficit_names)}}
    </h3>
</template>
<template name="mechanism1">

    <div>
        {{#if show_timer}}
        {{#if waiting}}
            {{else}}
        <p class="center"> Time remaining: {{time_remaining}} seconds</p>
            {{/if}}
        {{/if}}
    </div>
    <div style="width: 1300px; margin: auto">
        <form name="option">
            <p style="float: left; width: 95px;margin-left: 0px;"></p>
            <div style="float: left;"></div>
            {{> slider_head_mech1}}
            <label class="well" style="float: left; height: 80px;">
                <b style="height: 20px; float: left; margin-top: 10px;"> Option 1 </b>
                <input type="radio" name="radio" value = "0" style="height: 20px; float: left; margin-top: 10px; margin-left: 3px; margin-right: 3px;" />
                {{>mech1_slider (slider_names "slider00" "blue" "National Defense")}}
                {{>mech1_slider (slider_names "slider10" "green" "Medicare & Health")}}
                {{>mech1_slider (slider_names "slider20" "orange" "Science & Transportation")}}
                {{>mech1_slider (slider_names "slider30" "red" "Individual Income Tax")}}
                {{>mech1_slider (slider_names "slider40" "lightblue" "Deficit")}}

            </label>
            <label class="well" style="float: left; height: 80px;">
                <b style="height: 20px; float: left; margin-top: 10px;"> Option 2 </b>
                <input type="radio" name="radio" value = "1" style="height: 20px; float: left; margin-top: 10px; margin-left: 3px; margin-right: 3px;" />
                {{>mech1_slider (slider_names "slider01" "blue" "National Defense")}}
                {{>mech1_slider (slider_names "slider11" "green" "Medicare & Health")}}
                {{>mech1_slider (slider_names "slider21" "orange" "Science & Transportation")}}
                {{>mech1_slider (slider_names "slider31" "red" "Individual Income Tax")}}
                {{>mech1_slider (slider_names "slider41" "lightblue" "Deficit")}}
            </label>
            <label class="well" style="float: left; height: 80px;">
                <b style="height: 20px; float: left; margin-top: 10px;"> Option 3 </b>
                <input type="radio" name="radio" value = "2" style="height: 20px; float: left; margin-top: 10px; margin-left: 3px; margin-right: 3px;" />
                {{>mech1_slider (slider_names "slider02" "blue" "National Defense")}}
                {{>mech1_slider (slider_names "slider12" "green" "Medicare & Health")}}
                {{>mech1_slider (slider_names "slider22" "orange" "Science & Transportation")}}
                {{>mech1_slider (slider_names "slider32" "red" "Individual Income Tax")}}
                {{>mech1_slider (slider_names "slider42" "lightblue" "Deficit")}}
            </label>
        </form>
    </div>

</template>

<template name="deficit_template">
    <div style="clear: both">
        <span>The</span> <span id="{{this.deficit_text}}">deficit</span><span> will be </span>
        <span id="{{this.deficit_value}}" >X</span><span>. This is a </span><span id="{{this.deficit_percentage}}">Y</span><span> from 2016 estimates.</span>
    </div>
</template>

<template name="mech0_slider">
    <p id="{{this.label}}" style="float:left; margin-left: 7%;">{{this.title}}</p>
    <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="top" title="{{this.tooltip}}" aria-hidden="true" style="float:left; margin-left: 10px;"></span>
    <div style="clear: both;">
        <p id="{{this.comp}}" data-toggle="tooltip" data-placement="top" title="Change from 2016 estimates." aria-hidden="true" style="float: left; width: 7%;"></p>
        <div id="{{this.name}}" style="height: 20px; width: 83%; float: left; background: {{this.color}}"></div>
        <form name="{{this.name}}">
            $<textarea id="{{this.name}}" style="height:30px;width:7%;min-width: 80px">{{this.value}}</textarea>B<br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="{{this.min}}" style="display: inline; float: left;">min</p> <p id="{{this.cur}}" style="display: inline;"> curr</p> <p id="{{this.max}}" style="display: inline; float: right;">max</p> </div>
    </div>
    <br style="clear: both;">
</template>

<template name="slider_head_mech1">
    {{>mech1_slider_title (slider_names "" "" "National Defense")}}
    {{>mech1_slider_title (slider_names "" "" "Medicare & Health")}}
    {{>mech1_slider_title (slider_names "" "" "Transportation & Science")}}
    {{>mech1_slider_title (slider_names "" "" "Individual Income Tax")}}
    {{>mech1_slider_title (slider_names "" ""  "Deficit")}}
</template>

<template name="mech1_slider_title">
    <b style="float: left; width: 230px;">{{this.title}}<span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="top" title="{{this.tooltip}}" aria-hidden="true" style="margin-left: 10px;"></span> </b>
</template>

<template name="mech1_slider">
    <div class="well well-sm" style="float: left; height: 40px;">
            <span id="{{this.comp}}" data-toggle="tooltip" data-placement="top" title="Change from 2016 estimates." aria-hidden="true" style="float: left; width: 55px; height: 40px;"></span>
            <div class="progress" style="width: 150px; float: left; margin-left: 5px;">
                <div id="{{this.id}}" class="progress-bar" role="progressbar" style="color: black; width: 60%; background: {{this.color}};">
                </div>
            </div>
    </div>
</template>

<template name="mech2_slider">
    <p id="{{this.label}}" style="float:left; margin-left: 7%;">{{this.title}}</p>
    <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="top" title="{{this.tooltip}}" aria-hidden="true" style="float:left; margin-left: 10px;"></span>
    <div style="clear: both;">
        <p id="{{this.comp}}" data-toggle="tooltip" data-placement="top" title="Change from 2016 estimates." aria-hidden="true" style="float: left; width: 7%;"></p>
        <div id="{{this.name}}" style="height: 20px; width: 83%; float: left; background: {{this.color}}"></div>
        <form name="{{this.text}}">
            $<textarea id="{{this.name}}" style="height:30px;width:7%;min-width: 80px">{{this.value}}</textarea>B<br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="{{this.min}}" style="display: inline; float: left;">min</p> <p id="{{this.cur}}" style="display: inline; margin-left: 17%; float:left"> curr</p> <p id="{{this.max}}" style="display: inline; float: right;">max</p> </div>
    </div>
    <br style="clear: both;">
</template>

<template name="mech2_weight_slider">
    <p id="{{this.label}}" style="float:left; margin-left: 7%;">{{this.title}}</p>
    <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="top" title="{{this.tooltip}}" aria-hidden="true" style="float:left; margin-left: 10px;"></span>
    <div style="clear: both;">
        <div id="{{this.name}}" style="height: 20px; width: 83%; margin-left: 7%; float: left; background: {{this.color}}"></div>
        <form name="{{this.text}}">
            <textarea id="{{this.name}}" style="height:30px;width:7%;min-width: 80px">{{this.value}}</textarea><br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="{{this.min}}" style="display: inline; float: left;">min</p> <p id="{{this.cur}}" style="display: inline;"> curr</p> <p id="{{this.max}}" style="display: inline; float: right;">max</p> </div>
    </div>
    <br style="clear: both;">
</template>

<template name="mech3_slider">
    <p id="{{this.label}}" style="float:left; margin-left: 7%;">{{this.title}}</p>
    <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="top" title="{{this.tooltip}}" aria-hidden="true" style="float:left; margin-left: 10px;"></span>
    <div style="clear: both;">
        <p id="{{this.comp}}" data-toggle="tooltip" data-placement="top" title="Change from 2016 estimates." aria-hidden="true" style="float: left; width: 7%;"></p>
        <div id="{{this.name}}" style="height: 20px; width: 83%; float: left; background: {{this.color}}"></div>
        <form name="{{this.name}}">
            $<textarea id="{{this.name}}" style="height:30px;width:7%;min-width: 80px">{{this.value}}</textarea>B<br>
        </form>
        <div style="width: 83%; float: left; margin-left: 7%; clear: both;"><p id="{{this.min}}" style="display: inline; float: left;">min</p> <p id="{{this.cur}}" style="display: inline;"> curr</p> <p id="{{this.max}}" style="display: inline; float: right;">max</p> </div>
    </div>
    <br style="clear: both;">
</template>
<template name="mechanism2">
    <h3>
        <div>
            {{#if show_timer}}
                {{#if waiting}}
                {{else}}
                    <p class="center"> Time remaining: {{time_remaining}} seconds</p>
                {{/if}}
            {{/if}}
        </div>
        <br>
        {{> mech2_slider (slider_names "slider0" "blue" "National Defense")}}
        {{> mech2_slider (slider_names "slider1" "green" "Medicare & Health")}}
        {{> mech2_slider (slider_names "slider2" "orange" "Transportation & Science")}}
        {{> mech2_slider (slider_names "slider3" "red" "Individual Income Tax")}}

        {{> deficit_template (deficit_names)}}
        <br style="clear: both; margin-bottom: 150px;">

        <p align = "left"> On the following sliders, please indicate how much you care about each budget value being close to the values you proposed on the last page on a scale of 0 to 10. That is, if your total influence on the budget was limited, which budget items would you choose to influence? For example, if you care about all the items equally, then you could give a score of 10 each, whereas if you care more about defense spending and not so much about health-care spending, you could give a score of 10 to defense and 2 to health-care spending. </p>

        {{> mech2_weight_slider (slider_names "slider0weight" "blue" "National Defense")}}
        {{> mech2_weight_slider (slider_names "slider1weight" "green" "Medicare & Health")}}
        {{> mech2_weight_slider (slider_names "slider2weight" "orange" "Transportation & Science")}}
        {{> mech2_weight_slider (slider_names "slider3weight" "red" "Individual Income Tax")}}
        {{> mech2_weight_slider (slider_names "slider4weight" "lightblue" "Deficit")}}

    </h3>
</template>

<template name="answer0">
    <div class="center">

        {{#if show_timer}}
            {{#if waiting}}
            {{else}}
                <p class="center"> Time remaining: {{time_remaining}} seconds</p>
            {{/if}}
        {{/if}}

        {{>Template.dynamic template=current_question_text}}
        <h4>
            <br>
            Please click 'NEXT' once you read these instructions.
            <br>
        </h4>
        <input type="button" value="NEXT" id="answer_submission" class="btn btn-default">
    </div>
</template>
<template name="answer1">
    <div class="center">
        {{>Template.dynamic template=current_question_text}}
        {{>Template.dynamic template=current_mechanism}}
        <h4>
            <br style="clear: both;">
            Please explain your answers:
            <br>
        </h4>
        <form name="text_explanation">
            <textarea rows="8" cols="75"> </textarea> <br>
        </form>
        <input type="button" value="SUBMIT" id="answer_submission" class="btn btn-default">
    </div>
</template>

<template name="answer2">
    <div class="center">
        <h3>
            <p> How do you identify?</p>

            <form name = "political_stance_report">
                <label class="label label-primary">Very conservative&nbsp;&nbsp;<input type="radio" name="radio" value = "very conservative" /></label>
                <label class="label label-success">Somewhat conservative&nbsp;&nbsp;<input type="radio" name="radio" value = "somewhat conservative" /></label>
                <label class="label label-default">Neutral&nbsp;&nbsp;<input type="radio" name="radio" value = "neutral" /></label>
                <label class="label label-success">Somewhat liberal&nbsp;&nbsp;<input type="radio" name="radio" value = "somewhat liberal" /></label>
                <label class="label label-primary">Very liberal&nbsp;&nbsp;<input type="radio" name="radio" value = "very liberal" /></label>
                <br style="margin-bottom: 20px;">
                <br>
                <label class="label label-warning">Prefer not to answer&nbsp;&nbsp;<input type="radio" name="radio" value = "prefer not to answer" /></label>
            </form>
        </h3>
        <br>
        <input type="button" value="SUBMIT" id="answer_submission" class="btn btn-default">
    </div>
</template>

<template name="instructionsMain">

    <h4>
        <p align = "left">
            Welcome to our survey and thank you for participating. We are testing out various mechanisms that would allow people to vote on a government budget and would like your feedback on how these mechanisms work.
            <br><br>
            We will ask you questions about how you would like the US federal government to allocate money across a few of its major budget items. We'll present the budget items and their values from 2016 and ask you how you would like to change that budget.
            <br><br>
            ## INCLUDE Agreement form for IRB ### </p>
        <p>Click 'begin' once you have read and if you agree to the above consent statement. </p>
    </h4>

</template>

<template name="question0text">
    <h4>
        <p align = "left">
            In the next page, indicate your preferences regarding the federal budget. You'll see a budget based on what other people who have answered this survey have preferred. You’ll be allowed to modify the budget we show you to better match your preferences. We’ll also show you the change from how much the goverment is budgeted to spend in 2016 on the left-hand side for your reference.
            <br><br>
            You won’t be allowed to arbitrarily modify the budget that others have agreed upon, however. We’ll give you a fixed quota of ‘movement credits.’  To increase/decrease the budget from what others have agreed, you’ll have to spend these credits. Notably, the amount of credits you spend changing a given budget item will be proportional to the square of the change you make in that budget item. (Note that the square of the number <b>a</b> is <b>a</b> times <b>a</b> or <b>a</b> multiplied by <b>a</b>.)
            <br><br>
            For example, let’s say that people before you have agreed that we should decrease defense spending by 15B and increase taxes by 10B, but you would prefer that defense spending be decreased by 10B and taxes increased by only 7B. To move the defense spending to your ideal point, you would have to spend 25 credits (15B - 10B = 5B, and 5<sup>2</sup> = 25). To also move the tax spending to your ideal point, you would have to spend an additional 9 credits (10B - 7B = 3B, 3<sup>2</sup> = 9), for a total of 34 credits.
            <br><br>
            Of course, you may not have enough credits to make all the changes you wish to make, and so you’ll have to prioritize the changes you care about the most. Furthermore, note that as a consequence of the squaring rule, it is cheaper to move two items 5B each, for example, than it is to move one item 10B.
            <br><br> You may think that you can make only a very small difference in the budget. However, when many people's opinions are aggregated, a large change can be made!
            <br><br> Note that the spending figures are in Billions of dollars.
        </p>

    </h4>
</template>
<template name="question3text">
    <h4>
        <p align = "left">
            In the next page, indicate your preferences regarding the federal budget. You'll see a budget based on what other people who have answered this survey have preferred. You’ll be allowed to modify the budget we show you to better match your preferences. We’ll also show you the change from how much the goverment is budgeted to spend in 2016 on the left-hand side for your reference.
            <br><br>
            You won’t be allowed to arbitrarily modify the budget that others have agreed upon, however. We’ll give you a fixed quota of ‘movement credits.’  To increase/decrease the budget from what others have agreed, you’ll have to spend these credits.
            <br><br>
            Of course, you may not have enough credits to make all the changes you wish to make, and so you’ll have to prioritize the changes you care about the most. You may think that you can make only a very small difference in the budget. However, when many people's opinions are aggregated, a large change can be made!
            <br><br> Note that the spending figures are in Billions of dollars.
        </p>
    </h4>
</template>
<template name="question1text">
    <h4>
        <p align = "left">
            In the next page, indicate your preferences regarding the federal budget. You'll see three proposed federal budgets. Select the budget you like the most. On the left hand side, you'll see the change of your proposed budget from the 2016 budget. <br><br> You may think that the budgets are very similar, but if you and others keep moving it in the direction you prefer, a large change can be made! <br><br> Note that the spending figures are in Billions of dollars.
        </p>
    </h4>
</template>

<template name="question2text">
    <h4>
        <p align = "left">
            In the next page, indicate your preferences regarding the federal budget. For each of the given budget items, please move the sliders to indicate your ideal value for that budget item. On the left hand side, you'll see the change of your proposed budget from the 2016 budget, and the sliders' initial values are at the 2016 budget. <br><br> Note that the spending figures are in Billions of dollars.
        </p>
    </h4>
</template>
